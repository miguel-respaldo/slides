% ex: ts=2 sw=2 sts=2 et filetype=tex
% SPDX-License-Identifier: CC-BY-SA-4.0

\section{Introducción a SSH}

\begin{frame}[c]{¿Qué es SSH?}
  \textbf{SSH} (o Secure SHell) es el nombre de un
  \underline{protocolo} y del \underline{programa} que
  lo implementa cuya principal función es el acceso remoto a un servidor
  por medio de un canal seguro en el que toda la información está cifrada.

  \vspace{\baselineskip}
  Además de la conexión a otros dispositivos, SSH permite
  \begin{itemize}
    \item Copiar datos de forma segura
    \pausa
    \item Gestionar claves (llaves) para no escribir contraseñas
      al conectar a los dispositivos 
    \pausa
    \item Pasar los datos de cualquier otra aplicación por un canal
      seguro tunelizado mediante SSH
    \pausa
    \item Redirigir el tráfico del (Sistema de Ventanas X) para poder
      ejecutar programas gráficos remotamente.
  \end{itemize}
\end{frame}

\begin{frame}[c]{Versiones de SSH}
  Existen 2 versiones de SSH:

  \vspace{\baselineskip}
  La \textbf{versión 1} de SSH hace uso de muchos algoritmos de
  cifrado patentados (sin embargo, algunas de estas patentes han
  expirado) y es vulnerable a un agujero de seguridad que
  potencialmente permite a un intruso insertar datos
  en la corriente de comunicación.

  \pausa
  \vspace{\baselineskip}
  La \textbf{versión 2} de SSH, la cual tiene un algoritmo de
  intercambio de claves mejorado que no es vulnerable al agujero
  de seguridad en la versión 1.
\end{frame}

\begin{frame}[c]{¿Qué es OpenSSH?}
  \textbf{OpenSSH} (Open Secure Shell) es un conjunto de aplicaciones
  que permiten realizar comunicaciones \emph{cifradas a través de una red},
  usando el protocolo SSH. Fue creado como una alternativa libre y
  abierta al programa Secure Shell, que es software propietario.
  \begin{center}
    \includegraphics[scale=0.5]{openssh.png}
  \end{center}
\end{frame}

\begin{frame}[c]{Herramientas de OpenSSH}

  La suite OpenSSH consta de las siguientes herramientas:

  \begin{itemize}
    \item Las operaciones remotas se realizan mediante \textbf{ssh},
      \textbf{scp} y sftp.
    \pausa
    \item Gestión de claves con ssh-add, ssh-keysign, ssh-keyscan
      y \textbf{ssh-keygen}.
    \pausa
    \item El lado del servicio consta de \textbf{sshd}, sftp-server
      y \textbf{ssh-agent}.
  \end{itemize}

  \pausa
  \vspace{\baselineskip}
  OpenSSH es desarrollado por algunos desarrolladores del Proyecto OpenBSD
  y está disponible bajo una licencia de estilo BSD. 

  \vspace{\baselineskip}
  \begin{exampleblock}{Nota}
    En lo sucesivo hablaremos sólo de OpenSSH
  \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Conexión a un servidor remoto}

  Para conectarse aun servidor remoto usamos la siguiente instrucción:

  \vspace{\baselineskip}
  \begin{lstlisting}[language=Bash]
ssh USUARIO@SERVIDOR
  \end{lstlisting}

  \pause
  \vspace{\baselineskip}
  También puede ser de la siguiente manera

  \vspace{\baselineskip}
  \begin{lstlisting}[language=Bash]
ssh -l USUARIO SERVIDOR
  \end{lstlisting}

  \vspace{\baselineskip}
  Donde \texttt{USUARIO} es el nombre de usuario en el servidor remoto y
  \texttt{SERVIDOR} es la dirección \textbf{IP} o \textbf{nombre de dominio}
  del servidor al que vamos a acceder.
\end{frame}

\section{Configuración y llaves}

\begin{frame}[c]{Directorio de configuración}

  El directorio de configuración para un usuario es \textbf{.ssh}
  y se encuentra en

  \begin{exampleblock}{Windows}
    C:\textbackslash{}Users\textbackslash{}\textbf{TU\_USUARIO}\textbackslash{}.ssh
  \end{exampleblock}

  \pausa
  \begin{block}{Mac}
    /Users/\textbf{TU\_USUARIO}/.ssh
  \end{block}

  \pausa
  \begin{alertblock}{Linux}
    /home/\textbf{TU\_USUARIO}/.ssh
  \end{alertblock}
\end{frame}

\begin{frame}[c]{Archivo de configuración del cliente}

  \textbf{ssh} obtiene datos de configuración de las siguientes
  fuentes en el siguiente orden:

  \begin{enumerate}
    \item opciones de línea de comandos
    \pausa
    \item archivo de configuración del usuario (\~{}/.ssh/\textbf{config})
    \pausa
    \item archivo de configuración de todo el sistema
      (/etc/ssh/\textbf{ssh\_config})
  \end{enumerate}

  \vspace{\baselineskip}
  Para cada parámetro se utilizará el primer valor obtenido.

  \begin{exampleblock}{Nota:}
    El símbolo de \textbf{\~{}} representa el directorio de usuario. En
    Linux y Mac se conoce como \textbf{\$HOME} y en Windows como
    \textbf{\%USERPROFILE\%}
  \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Archivo de configuración de SSH}

  Los archivos de configuración contienen secciones separadas por
  especificaciones de \textbf{Host}, y esa sección solo se aplica
  a hosts/servidor que coinciden con uno de los patrones
  proporcionados en la especificación.

  \vspace{\baselineskip}
  \begin{lstlisting}[language=Bash,basicstyle={\footnotesize\ttfamily}]
Host nube
    Hostname nube.de.algodon
    User     miusuario
  \end{lstlisting}

  \pause
  \vspace{\baselineskip}
  Para hacer la conexión al servidor \texttt{nube.de.algodon} se utiliza:
  \begin{lstlisting}[language=Bash]
ssh nube
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Archivo de configuración de SSH}

  \begin{lstlisting}[language=Bash,basicstyle={\footnotesize\ttfamily}]
Host nube
    Hostname 1.2.3.4
    User     miusuario
    IdentityFile ~/.ssh/llave.key
    PreferredAuthentications publickey
    StrictHostKeyChecking  no
    UserKnownHostsFile     /dev/null
    LogLevel               error
    ConnectTimeout         15
    IdentitiesOnly         yes
    AddressFamily          inet
    #ProxyCommand  connect-proxy -a none -S proxy.com:1234 %h %p
  \end{lstlisting}

  \vspace{\baselineskip}
  Para hacer la conexión al servidor \texttt{nube} se utiliza:
  \begin{lstlisting}[language=Bash]
ssh nube
  \end{lstlisting}
\end{frame}



\section{Tunel SSH}

\begin{frame}[c]{titutlo}
\end{frame}

\section{GitHub y SSH}

\begin{frame}[c]{titutlo}
\end{frame}
